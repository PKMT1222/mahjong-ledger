
## 2026-02-16 - Mahjong Ledger 開發進度

### 已完成工作

#### 1. 台灣麻雀 & 日本麻雀規則實現
- 更新 `src/app/game/[id]/page.tsx` 使用變體規則同計分邏輯
- 動態適應界面：根據選擇規則自動調整
  - 香港：番種選擇、包自摸
  - 台灣：台數牌型、莊家加成
  - 日本：符數選擇、滿貫制度
- 計分函數：`mahjongRules.ts` 已實現三種規則嘅專業計分邏輯

#### 2. 自定義規則配置系統
**新檔案：**
- `src/lib/customRules.ts` - 規則核心邏輯（預設規則、本地儲存、計分）
- `src/app/rules/page.tsx` - 規則管理界面

**預設規則：**
- 3番4半辣上、3番4辣辣上
- 二五雞半辣上、二五雞辣辣上
- 一番一雞半辣上、傳統港式

**功能：**
- 全銃/半銃選擇
- Jackpot 啟用
- 莊家記錄、荒牌過莊
- 番數範圍設定（最小-最大）
- 自摸倍數調整
- 動態番數對照表（可編輯）
- 本地儲存於 localStorage

**更新檔案：**
- `src/app/new-game/page.tsx` - 新增對局時可選擇規則
- `src/app/game/[id]/page.tsx` - 支援自定義規則計分

### 關鍵技術決策
- 規則數據結構包含完整計分邏輯所需參數
- 預設規則 `isPreset: true`，自訂規則 `isPreset: false`
- 番數對照表允許非線性設定（每個番數可獨立設定）
- 自摸番數自動計算：出統 × 倍數（四捨五入）

### Git 提交
- `07f4884` - Update game page to properly use variant-specific scoring
- `e011bf4` - Add comprehensive custom game rules system

### 待辦事項
- [ ] 測試三種規則（香港/台灣/日本）嘅完整流程
- [ ] 測試自定義規則創建同使用
- [ ] 考慮添加規則導入/導出功能
